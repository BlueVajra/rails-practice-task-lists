<%= form_tag "/", method: :get do %>
  <%= collection_select :task, :assigned_to, User.all, :id, :name, include_blank: "Select a user" %>
  <%= submit_tag "Filter" %>
<% end %>

<% @task_lists.each do |task_list| %>

  <section class="task-list">
    <%= link_to "+ Add Task", new_task_list_task_path(task_list), class: "add-task" %>
    <h1><%= task_list.name %></h1>
    <% if @user_id %>
      <% tasks = task_list.tasks.incomplete.order(:due_date).is_assigned_to(@user_id) %>
    <% else %>
      <% tasks = task_list.tasks.incomplete.order(:due_date) %>
    <% end %>
    <% if tasks.present? %>
      <%= render partial: 'tasks/task', collection: tasks %>
    <% else %>
      <div class="empty">Nothing here to see!</div>
    <% end %>
  </section>

<% end %>